\hypertarget{classQbeSAS_1_1HttpService}{
\section{Http\-Service Klassenreferenz}
\label{classQbeSAS_1_1HttpService}\index{QbeSAS::HttpService@{QbeSAS::HttpService}}
}


\subsection{Ausf\"{u}hrliche Beschreibung}
Implementiert den HTTP Dienst im Qbe\-Svc fuer alle Platformen, inklusive der Kommunikation mit dem \hyperlink{namespaceQbe}{Qbe} Authentication Server. 



Definiert in Zeile 14 der Datei Http\-Service.cs.\subsection*{\"{O}ffentliche Methoden}
\begin{CompactItemize}
\item 
\hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea0}{Http\-Service} (int tcp\-Port, bool enable\-SSL)
\begin{CompactList}\small\item\em Standardkonstruktor. Erwartet eine TCP/IP Portnummer (normalerweise 7666) und ob SSL aktiviert werden soll. \item\end{CompactList}\item 
bool \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea1}{Run\-As\-Own\-Thread} ()
\begin{CompactList}\small\item\em Startet die Ausfuehrung des HTTP Service in einem eigenen Thread. \item\end{CompactList}\item 
bool \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea2}{Kill\-Own\-Thread} ()
\item 
bool \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea3}{Run} ()
\item 
void \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea4}{run\-Logout} ()
\begin{CompactList}\small\item\em Ruft den RPC client/logout am Authentication Server auf. \item\end{CompactList}\item 
void \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea5}{run\-Login} ()
\begin{CompactList}\small\item\em Ruft den RPC client/login am Authentication Server auf. \item\end{CompactList}\end{CompactItemize}
\subsection*{Private Methoden}
\begin{CompactItemize}
\item 
void \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced0}{Run\-As\-Own\-Thread\-Thread\-Func} ()
\item 
bool \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced1}{Run2} ()
\item 
void \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced2}{Tcp\-Client\-Handler\-Func} ()
\item 
String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced3}{Make\-Resp\-Err\-Generic} (String error\-Text)
\begin{CompactList}\small\item\em Genertiert eine Standard-HTTP-Fehlerantwort. \item\end{CompactList}\item 
String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced4}{Make\-Resp\-Err\-Not\-Implemented} ()
\begin{CompactList}\small\item\em Generiert eine Standard-HTTP-Fehlerantwort fuer nicht implementierte Befehle. \item\end{CompactList}\item 
String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced5}{Make\-Resp\-Ok} ()
\begin{CompactList}\small\item\em Generiert eine Standard-HTTP-Erfolgsantwort. \item\end{CompactList}\item 
String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced6}{Make\-Resp\-Ok\-With\-Data} (String Data)
\item 
String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced7}{Make\-Resp\-Login\-Form} (bool b\-Automatic)
\item 
\hyperlink{classQbeSAS_1_1HttpService_1_1ServiceHttpResponse}{Service\-Http\-Response} \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced8}{Parse\-Request} (String Filename, \hyperlink{classQbeSAS_1_1HttpService_1_1UriGetParameter}{Uri\-Get\-Parameter}\mbox{[}$\,$\mbox{]} Parameters)
\begin{CompactList}\small\item\em Bearbeited die schon zerpflueckte Anfrage an den HTTP Service. \item\end{CompactList}\item 
\hyperlink{classQbeSAS_1_1HttpService_1_1ForeignHttpResponse}{Foreign\-Http\-Response} \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced9}{run\-Url} (string url\-Str)
\begin{CompactList}\small\item\em Fuehrt einen RPC Aufruf am \hyperlink{namespaceQbe}{Qbe} Authentication Server aus. \item\end{CompactList}\item 
void \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced10}{exec\-Login} ()
\item 
void \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced11}{exec\-Logout} ()
\item 
void \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced12}{exec\-Notification} (String Message\-Text)
\end{CompactItemize}
\subsection*{Private Attribute}
\begin{CompactItemize}
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer0}{RES\_\-NEWLINE} = \char`\"{}$\backslash$r$\backslash$n\char`\"{}
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer1}{RES\_\-HEADER\_\-SERVER} = \char`\"{}Server: Qbe\-Service/\char`\"{} + Qbe.Qbe\-Client\-Version.Client\-Version + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer0}{RES\_\-NEWLINE}
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer2}{RES\_\-HEADERS}
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer3}{RES\_\-HEADER\_\-REFRESH0} = \char`\"{}Refresh: 0; url=\{0\}\char`\"{} + RES\_\-NEWLINE
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer4}{RES\_\-HEADER\_\-REFRESH5} = \char`\"{}Refresh: 5; url=\{0\}\char`\"{} + RES\_\-NEWLINE
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} = \char`\"{}HTTP/1.0\char`\"{}
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer6}{RES\_\-HTTP\_\-OK} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} + \char`\"{} 200 Ok\char`\"{} + RES\_\-NEWLINE
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer7}{RES\_\-HTTP\_\-BADREQUEST} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} + \char`\"{} 400 Bad Request\char`\"{} + RES\_\-NEWLINE
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer8}{RES\_\-HTTP\_\-NOTFOUND} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} + \char`\"{} 404 Not Found\char`\"{} + RES\_\-NEWLINE
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer9}{RES\_\-HTTP\_\-ERROR} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} + \char`\"{} 500 Internal Server Error\char`\"{} + RES\_\-NEWLINE
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer10}{RES\_\-DEFAULT\_\-OK} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer6}{RES\_\-HTTP\_\-OK} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer1}{RES\_\-HEADER\_\-SERVER} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer2}{RES\_\-HEADERS}
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer11}{RES\_\-DEFAULT\_\-NOTFOUND} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer8}{RES\_\-HTTP\_\-NOTFOUND} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer1}{RES\_\-HEADER\_\-SERVER} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer2}{RES\_\-HEADERS} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer0}{RES\_\-NEWLINE} + \char`\"{}Location not found.\char`\"{} + RES\_\-NEWLINE
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer12}{RES\_\-HTML\_\-HEADER}
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer13}{RES\_\-HTML\_\-FOOTER}
\item 
const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer14}{RES\_\-USERAGENT} = \char`\"{}Qbe\-Service/\char`\"{} + Qbe.Qbe\-Client\-Version.Client\-Version
\item 
\hyperlink{classQbeSAS_1_1HttpService_1_1ServiceDataType}{Service\-Data\-Type} \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer15}{Service\-Data} = new \hyperlink{classQbeSAS_1_1HttpService_1_1ServiceDataType}{Service\-Data\-Type}()
\item 
System.Net.Sockets.Tcp\-Listener \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer16}{tcp\-Listener} = null
\item 
System.Net.Sockets.Socket \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer17}{tcp\-Client} = null
\item 
System.Threading.Thread \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer18}{Own\-Thread} = null
\item 
bool \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer19}{tcp\-Client\-Running} = false
\end{CompactItemize}


\subsection{Beschreibung der Konstruktoren und Destruktoren}
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea0}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!HttpService@{HttpService}}
\index{HttpService@{HttpService}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[HttpService]{\setlength{\rightskip}{0pt plus 5cm}\hyperlink{classQbeSAS_1_1HttpService}{Http\-Service} (int {\em tcp\-Port}, bool {\em enable\-SSL})}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea0}


Standardkonstruktor. Erwartet eine TCP/IP Portnummer (normalerweise 7666) und ob SSL aktiviert werden soll. 



Definiert in Zeile 126 der Datei Http\-Service.cs.

Benutzt Http\-Service::tcp\-Listener.



\footnotesize\begin{verbatim}127     {
128       //System.Net.IPAddress ipAddress = System.Net.Dns.Resolve("localhost").AddressList[0];
129       this.ServiceData.bUseSSL = enableSSL;
130       try
131       {
132         tcpListener = new System.Net.Sockets.TcpListener(System.Net.IPAddress.Any,tcpPort);
133         Console.WriteLine("Listening on: " + tcpListener.LocalEndpoint.ToString());
134       }
135       catch (Exception ex)
136       { ex=ex;
137         Console.WriteLine(ex.Message + "\n" + ex.StackTrace);
138         tcpListener = null;
139         return;
140       }
141     }
\end{verbatim}\normalsize 


\subsection{Dokumentation der Elementfunktionen}
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced10}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!execLogin@{execLogin}}
\index{execLogin@{execLogin}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[execLogin]{\setlength{\rightskip}{0pt plus 5cm}void exec\-Login ()\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced10}




Definiert in Zeile 811 der Datei Http\-Service.cs.



\footnotesize\begin{verbatim}812     {
813       this.ServiceData.User_Internet = -1;
814       this.ServiceData.User_Traffic = -1;
815       this.ServiceData.User_Diskspace = -1;
816       this.ServiceData.ConnectionError = -1;    // reset data
817       this.ServiceData.ConnectionState = -1;    // first, so the refreshing will work
818       this.ServiceData.LastTime = DateTime.Now;
819 
820       System.Threading.Thread t;
821       t = new System.Threading.Thread(new System.Threading.ThreadStart(this.runLogin));
822       t.Start();
823     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced11}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!execLogout@{execLogout}}
\index{execLogout@{execLogout}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[execLogout]{\setlength{\rightskip}{0pt plus 5cm}void exec\-Logout ()\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced11}




Definiert in Zeile 824 der Datei Http\-Service.cs.



\footnotesize\begin{verbatim}825     {
826       this.ServiceData.User_Internet = -1;
827       this.ServiceData.User_Traffic = -1;
828       this.ServiceData.User_Diskspace = -1;
829       System.Threading.Thread t;
830       t = new System.Threading.Thread(new System.Threading.ThreadStart(this.runLogout));
831       t.Start();
832     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced12}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!execNotification@{execNotification}}
\index{execNotification@{execNotification}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[execNotification]{\setlength{\rightskip}{0pt plus 5cm}void exec\-Notification (String {\em Message\-Text})\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced12}




Definiert in Zeile 834 der Datei Http\-Service.cs.

Benutzt Http\-Service::exec\-Notification\-Thread::exec\-Notification\-Thread\-Func().



\footnotesize\begin{verbatim}835     {
836       System.Threading.Thread t;
837       execNotificationThread thread = new execNotificationThread(MessageText);
838       t = new System.Threading.Thread(new System.Threading.ThreadStart(thread.execNotificationThreadFunc));
839       t.Start();
840     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea2}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!KillOwnThread@{KillOwnThread}}
\index{KillOwnThread@{KillOwnThread}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[KillOwnThread]{\setlength{\rightskip}{0pt plus 5cm}bool Kill\-Own\-Thread ()}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea2}




Definiert in Zeile 168 der Datei Http\-Service.cs.

Benutzt Http\-Service::Own\-Thread.

Wird benutzt von Service\-Start().



\footnotesize\begin{verbatim}169     {
170       try 
171       {
172         OwnThread.Abort();
173       } 
174       catch (Exception ex) { ex=ex; /* no error */ }
175 
176       OwnThread = null;
177       return true;
178     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced3}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!MakeRespErrGeneric@{MakeRespErrGeneric}}
\index{MakeRespErrGeneric@{MakeRespErrGeneric}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[MakeRespErrGeneric]{\setlength{\rightskip}{0pt plus 5cm}String Make\-Resp\-Err\-Generic (String {\em error\-Text})\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced3}


Genertiert eine Standard-HTTP-Fehlerantwort. 



Definiert in Zeile 314 der Datei Http\-Service.cs.

Benutzt Http\-Service::RES\_\-HEADER\_\-SERVER, Http\-Service::RES\_\-HEADERS, Http\-Service::RES\_\-HTTP\_\-ERROR und Http\-Service::RES\_\-NEWLINE.



\footnotesize\begin{verbatim}315     {
316       return RES_HTTP_ERROR + RES_HEADER_SERVER + RES_HEADERS + "Sorry, an error has occoured: " + errorText + RES_NEWLINE;
317     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced4}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!MakeRespErrNotImplemented@{MakeRespErrNotImplemented}}
\index{MakeRespErrNotImplemented@{MakeRespErrNotImplemented}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[MakeRespErrNotImplemented]{\setlength{\rightskip}{0pt plus 5cm}String Make\-Resp\-Err\-Not\-Implemented ()\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced4}


Generiert eine Standard-HTTP-Fehlerantwort fuer nicht implementierte Befehle. 



Definiert in Zeile 319 der Datei Http\-Service.cs.

Benutzt Http\-Service::RES\_\-HEADER\_\-SERVER, Http\-Service::RES\_\-HEADERS, Http\-Service::RES\_\-HTTP\_\-ERROR und Http\-Service::RES\_\-NEWLINE.



\footnotesize\begin{verbatim}320     {
321       return RES_HTTP_ERROR + RES_HEADER_SERVER + RES_HEADERS + "Sorry, this command has not been implemented." + RES_NEWLINE;
322     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced7}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!MakeRespLoginForm@{MakeRespLoginForm}}
\index{MakeRespLoginForm@{MakeRespLoginForm}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[MakeRespLoginForm]{\setlength{\rightskip}{0pt plus 5cm}String Make\-Resp\-Login\-Form (bool {\em b\-Automatic})\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced7}




Definiert in Zeile 332 der Datei Http\-Service.cs.

Benutzt Http\-Service::RES\_\-DEFAULT\_\-OK, Http\-Service::RES\_\-HTML\_\-FOOTER, Http\-Service::RES\_\-HTML\_\-HEADER und Http\-Service::RES\_\-NEWLINE.



\footnotesize\begin{verbatim}333     {
334       String ResponseText;
335 
336       bool bCloseThis;
337       bCloseThis = (bAutomatic && (this.ServiceData.ConnectionError == 200) && (this.ServiceData.ConnectionState == 0));
338         
339       if (bCloseThis)
340       {
341         ResponseText = RES_DEFAULT_OK + RES_HTML_HEADER; 
342         ResponseText += "<script>window.close(); top.window.close();</script>" + RES_NEWLINE;
343         ResponseText += RES_HTML_FOOTER;
344         return ResponseText;
345       }
346         
347       ResponseText = RES_DEFAULT_OK;
348       ResponseText += RES_HTML_HEADER;
349       ResponseText += "<form method=get action=\"/web/hta-login-post\" id=\"loginform\" name=\"loginform\">";
350       ResponseText += "<table border=0 cellpadding=2>";
351 
352       ResponseText += "<tr><td><b>Benutzername:</b></td align=left><td><input type=text name=user id=user size=15></td></tr>";
353       ResponseText += "<tr><td><b>Kennwort:</b></td><td align=left><input type=password name=pass id=pass size=15></td></tr>";
354 #if !UNIX
355       ResponseText += "<tr><td></td><td align=left><input type=checkbox name=save id=save> Kennwort speichern</td></tr>";
356 #endif
357       if (bAutomatic == true)
358       {
359         ResponseText += "<input type=hidden name=auto value=1>";
360       }
361       ResponseText += "<tr><td></td><td align=left><button type=submit onClick=\"submitform();\">Anmelden</button></td></tr>";
362 
363       ResponseText += "</table>";
364       ResponseText += "</form>";
365 
366 #if !UNIX
367       // 31337 script for saving username and password using COM in the user reg
368       ResponseText += "<script language=vbscript>" + RES_NEWLINE;
369       ResponseText += "Function submitform(): set iluser = CreateObject(\"iLoginCOM.UserDetails\"): iluser.saveData loginform.user.value,loginform.pass.value,loginform.save.checked: loginform.submit: End Function" + RES_NEWLINE;
370       ResponseText += "set iluser = CreateObject(\"iLoginCOM.UserDetails\"): loginform.user.value = iluser.getUsername(): loginform.pass.value = iluser.getPassword(): if loginform.pass.value <> \"\" then: loginform.submit: end if" + RES_NEWLINE + "</script>" + RES_NEWLINE;
371 #endif
372 
373       ResponseText += RES_HTML_FOOTER;
374       return ResponseText;
375     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced5}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!MakeRespOk@{MakeRespOk}}
\index{MakeRespOk@{MakeRespOk}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[MakeRespOk]{\setlength{\rightskip}{0pt plus 5cm}String Make\-Resp\-Ok ()\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced5}


Generiert eine Standard-HTTP-Erfolgsantwort. 



Definiert in Zeile 324 der Datei Http\-Service.cs.

Benutzt Http\-Service::RES\_\-HEADER\_\-SERVER, Http\-Service::RES\_\-HEADERS, Http\-Service::RES\_\-HTTP\_\-OK und Http\-Service::RES\_\-NEWLINE.



\footnotesize\begin{verbatim}325     {
326       return RES_HTTP_OK + RES_HEADER_SERVER + RES_HEADERS + "Ok, Sir." + RES_NEWLINE;
327     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced6}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!MakeRespOkWithData@{MakeRespOkWithData}}
\index{MakeRespOkWithData@{MakeRespOkWithData}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[MakeRespOkWithData]{\setlength{\rightskip}{0pt plus 5cm}String Make\-Resp\-Ok\-With\-Data (String {\em Data})\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced6}




Definiert in Zeile 328 der Datei Http\-Service.cs.

Benutzt Http\-Service::RES\_\-HEADER\_\-SERVER, Http\-Service::RES\_\-HEADERS, Http\-Service::RES\_\-HTTP\_\-OK und Http\-Service::RES\_\-NEWLINE.



\footnotesize\begin{verbatim}329     {
330       return RES_HTTP_OK + RES_HEADER_SERVER + RES_HEADERS + Data + RES_NEWLINE;
331     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced8}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!ParseRequest@{ParseRequest}}
\index{ParseRequest@{ParseRequest}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[ParseRequest]{\setlength{\rightskip}{0pt plus 5cm}\hyperlink{classQbeSAS_1_1HttpService_1_1ServiceHttpResponse}{Service\-Http\-Response} Parse\-Request (String {\em Filename}, \hyperlink{classQbeSAS_1_1HttpService_1_1UriGetParameter}{Uri\-Get\-Parameter}\mbox{[}$\,$\mbox{]} {\em Parameters})\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced8}


Bearbeited die schon zerpflueckte Anfrage an den HTTP Service. 



Definiert in Zeile 378 der Datei Http\-Service.cs.

Benutzt Http\-Service::Service\-Data\-Type::Auth\-Server, Http\-Service::Service\-Data\-Type::Connection\-Error, Http\-Service::Service\-Data\-Type::Connection\-State, Http\-Service::RES\_\-DEFAULT\_\-NOTFOUND, Http\-Service::RES\_\-DEFAULT\_\-OK, Http\-Service::RES\_\-HTML\_\-FOOTER, Http\-Service::RES\_\-HTML\_\-HEADER, Http\-Service::RES\_\-HTTP, Http\-Service::RES\_\-NEWLINE, Http\-Service::Service\-Http\-Response::Response\-Text, Http\-Service::Service\-Data, Http\-Service::Service\-Http\-Response::Shutdown\-Service, Http\-Service::Uri\-Get\-Parameter::Unsplitted\-Value, Http\-Service::Service\-Data\-Type::User\_\-Internet und Http\-Service::Service\-Data\-Type::Username.



\footnotesize\begin{verbatim}379     {
380       ServiceHttpResponse resp = new ServiceHttpResponse("");
381       String ResponseText = "";
382 
383       switch (Filename)
384       {
385         case "/":
386         {
387           ResponseText = RES_HTTP + " 302 Moved" + RES_NEWLINE; 
388           ResponseText += "Location: /web/html-frameset";
389           ResponseText += RES_NEWLINE + RES_NEWLINE;
390 
391           break;
392         }
393         case "/web/menu":
394         {
395           ResponseText = RES_DEFAULT_OK;
396           ResponseText += RES_HTML_HEADER;
397           ResponseText += "<meta http-equiv=refresh content=\"2\" />";
398           ResponseText += "<table border=0 cellpadding=2>";
399 
400           if (this.ServiceData.LastTime.Ticks != 0)
401             ResponseText += "<tr><td colspan=2>" + QbeSAS.SysState.getStateString(this.ServiceData.ConnectionState,this.ServiceData.User_Internet,this.ServiceData.Username) + " (" + this.ServiceData.ConnectionError.ToString() + ")</td></tr>";
402           // else: never tried!
403 
404           ResponseText += "<tr><td>Benutzername:</td><td>" + (this.ServiceData.Username != "" ? this.ServiceData.Username : "(unbekannt)")+ "</td></tr>";
405 
406           if (this.ServiceData.User_Internet != -1)
407             ResponseText += "<tr><td>Internetstatus:</td><td>" + this.ServiceData.User_Internet.ToString()+ "</td></tr>";
408 
409           if ( (this.ServiceData.User_Diskspace != -1) && (this.ServiceData.User_Traffic != -1) )
410             ResponseText += "<tr><td>Statistik:</td><td>Diskspace: " + this.ServiceData.User_Diskspace.ToString() + "% Traffic: " + this.ServiceData.User_Traffic.ToString() + "%</td></tr>";
411 
412           if (this.ServiceData.LastTime.Ticks != 0)
413             ResponseText += "<tr><td>LastConnection:</td><td>" + this.ServiceData.LastTime.ToString()+ "</td></tr>";
414 
415           ResponseText += "</table>";
416           ResponseText += RES_HTML_FOOTER;
417           break;
418         }
419         case "/web/html-topframe":
420           ResponseText = RES_DEFAULT_OK + "<html><body bgcolor=\"#336699\" style=\"color: white; font-family: 'Trebuchet MS',Geneva,Helvetica,Arial; font-size: 22pt; font-weight: bold;\">Qbe <span style=\"color: red;\">SAS Client "+ Qbe.QbeClientVersion.ClientVersion +"</span></body></html>" + RES_NEWLINE;
421           break;
422         case "/web/html-frameset":
423           ResponseText = RES_DEFAULT_OK + "<frameset rows=\"55,*\" border=0><frame src=\"/web/html-topframe\"><frame src=\"/web/menu\"></frameset>" + RES_NEWLINE;
424           break;
425         case "/web/login":
426           ResponseText = this.MakeRespLoginForm(false);
427           break;
428         case "/web/hta-login":
429           ResponseText = this.MakeRespLoginForm(true);
430           break;
431         case "/web/hta-login-post":
432         {
433           if (Parameters.Length >= 2)
434           { 
435             bool bAutomatic = false;
436             if (UriGetParameter.FindParameter(Parameters,"auto") != null) 
437               if (UriGetParameter.FindParameter(Parameters,"auto") == "1")
438                 bAutomatic = true;
439 
440             this.ServiceData.Username = UriGetParameter.FindParameter(Parameters,"user");
441             this.ServiceData.Password = UriGetParameter.FindParameter(Parameters,"pass");
442             if ( (this.ServiceData.Username != null) && (this.ServiceData.Username == "") )
443               this.ServiceData.Username = null;
444             if ( (this.ServiceData.Password != null) && (this.ServiceData.Password == "") )
445               this.ServiceData.Password = null;
446       
447             if ( (this.ServiceData.Username != null) && (this.ServiceData.Password != null))
448             {
449               ResponseText = RES_DEFAULT_OK + RES_HTML_HEADER + "Sie werden angemeldet... <meta http-equiv=refresh content=\"2; url=/web/hta-login-done?auto=" + (bAutomatic ? "1" : "0") + "\">" + RES_HTML_FOOTER;
450               this.execLogin();
451             }
452             else 
453             {
454               ResponseText = RES_DEFAULT_OK + RES_HTML_HEADER + "<script language=JavaScript>alert(\"Kein Benutzername/Passwort angegeben!\"); history.go(-1);</script>" + RES_HTML_FOOTER;
455             }
456           }
457           break;
458         }
459         case "/web/hta-login-done":
460         {
461           bool bAutomatic = false;
462           if (UriGetParameter.FindParameter(Parameters,"auto") != null) 
463             if (UriGetParameter.FindParameter(Parameters,"auto") == "1")
464               bAutomatic = true;
465 
466           ResponseText = RES_DEFAULT_OK + RES_HTML_HEADER;
467           switch (this.ServiceData.ConnectionState)
468           {
469             case -1:
470               if (this.ServiceData.LastTime.Ticks != 0)
471               {
472                 ResponseText += "Anmeldung l&auml;uft. <meta http-equiv=refresh content=\"1\">";
473               } 
474               else 
475               {
476                 ResponseText += "<meta http-equiv=refresh content=\"0; url=/web/hta-login\">";
477               }
478               break;
479             case 0:
480               ResponseText += "<script language=vbscript>set iluser = CreateObject(\"iLoginCOM.UserDetails\"): iluser.NetworkLogon \"" + this.ServiceData.Username + "\", \"" + this.ServiceData.Password + "\"" + RES_NEWLINE;
481 
482               if (bAutomatic)
483                 ResponseText += "window.close: window.top.close: top.window.close</script>";
484               else
485                 ResponseText += "</script><big>Okay.</big><meta http-equiv=refresh content=\"0; url=/web/menu\">";
486               break;
487             case 1:
488               ResponseText += "<big style=\"color: red;\">Fehler:</span><br>Der Server hat die Verbindung zur&uuml;ckgewiesen.<br>";
489               if (this.ServiceData.ConnectionError == 403)
490               {
491                 ResponseText += " &nbsp; <b>Benutzername/Passwort falsch.</b><br>";
492               }
493               break;
494             default:
495               break;
496           }
497 
498           ResponseText += RES_HTML_FOOTER;
499           break;
500         }
501         case "/web/logout":
502         {
503           ResponseText = RES_DEFAULT_OK;
504           ResponseText += RES_HTML_HEADER;
505           ResponseText += "Sie werden abgemeldet.";
506           ResponseText += "<script language=vbscript>set iluser = CreateObject(\"iLoginCOM.UserDetails\"): iluser.NetworkLogout \"" + this.ServiceData.Username + "\":</script>\n";
507           ResponseText += "<meta http-equiv=refresh content=\"5; url=/web/menu\">";
508           ResponseText += RES_HTML_FOOTER;
509           this.execLogout();
510           break;
511         }
512         case "/web/cleardata":
513         {
514           ResponseText = RES_DEFAULT_OK;
515           ResponseText += RES_HTML_HEADER;
516           ResponseText += "<script language=vbscript>set iluser = CreateObject(\"iLoginCOM.UserDetails\"): iluser.saveData \"\",\"\",0: alert \"Benutzername und Passwort wurde entfernt.\": window.location = \"/web/menu\"</script>\n";
517           ResponseText += RES_HTML_FOOTER;
518           break;
519         }
520         case "/auth/login":
521           if ( (this.ServiceData.Username == "") || (this.ServiceData.Password == ""))
522           {
523             ResponseText = this.MakeRespErrGeneric("No Username.");
524           } 
525           else 
526           {
527             ResponseText = this.MakeRespOk();
528             this.runLogin();
529           }
530           break;
531         case "/auth/setauthserver":
532           if (Parameters.Length > 0)
533           {
534             this.ServiceData.AuthServer = Parameters[0].UnsplittedValue;
535             ResponseText = this.MakeRespOk();
536           } else {
537             ResponseText = this.MakeRespErrGeneric("No Server specified!");
538           }
539           break;
540         case "/auth/setlogin":
541           if (Parameters.Length >= 2)
542           {
543             this.ServiceData.Username = UriGetParameter.FindParameter(Parameters,"user");
544             this.ServiceData.Password = UriGetParameter.FindParameter(Parameters,"pass");
545       
546             if ( (this.ServiceData.Username != null) && (this.ServiceData.Password != null))
547             {
548               ResponseText = this.MakeRespOk();
549             }
550             else 
551             {
552               ResponseText = this.MakeRespErrGeneric("No Username/Password specified");
553             }
554           }
555           break;
556         case "/auth/logout":
557           ResponseText = this.MakeRespOk();
558           this.runLogout();
559           break;
560         case "/ilogin/forcerefresh":
561           ResponseText = this.MakeRespOk();
562           this.ServiceData.LastTime = DateTime.Now;
563           break;
564         case "/ilogin/statusupdate":
565           switch (UriGetParameter.FindParameter(Parameters,"event"))
566           {
567             case "dataupdate":
568             {
569               if (UriGetParameter.FindParameter(Parameters,"inetstate")!= null)
570                 if (UriGetParameter.FindParameter(Parameters,"inetstate")!="")
571                 {
572                   Console.WriteLine("inetstate: " + UriGetParameter.FindParameter(Parameters,"inetstate"));
573                   this.ServiceData.User_Internet = Int32.Parse(UriGetParameter.FindParameter(Parameters,"inetstate"));
574                 }
575               
576               if (UriGetParameter.FindParameter(Parameters,"diskspace")!= null)
577                 if (UriGetParameter.FindParameter(Parameters,"diskspace")!="")
578                 {
579                   Console.WriteLine("diskspace: " + UriGetParameter.FindParameter(Parameters,"diskspace"));
580                   this.ServiceData.User_Diskspace = Int32.Parse(UriGetParameter.FindParameter(Parameters,"diskspace"));
581                 }
582               if (UriGetParameter.FindParameter(Parameters,"traffic")!= null)
583                 if (UriGetParameter.FindParameter(Parameters,"traffic")!="")
584                 {
585                   Console.WriteLine("traffic: " + UriGetParameter.FindParameter(Parameters,"traffic"));
586                   this.ServiceData.User_Traffic = Int32.Parse(UriGetParameter.FindParameter(Parameters,"traffic"));
587                 }
588               
589               ResponseText = this.MakeRespOk();
590 #if UNIX
591               Console.WriteLine("New Statistics: Inet: " + this.ServiceData.User_Internet + ", Diskspace: " + this.ServiceData.User_Diskspace + "%, Traffic: " + this.ServiceData.User_Traffic + "%");
592 #endif
593               break;
594             }
595             case "unlock":
596               this.ServiceData.User_Internet = 0;
597               ResponseText = this.MakeRespOk();
598 #if UNIX
599               Console.WriteLine("Proxy unlocked you.");
600 #endif
601               break;
602             case "lock":
603               this.ServiceData.User_Internet = 1;
604               ResponseText = this.MakeRespOk();
605 #if UNIX
606               Console.WriteLine("Proxy locked you.");
607 #endif
608               break;
609             default:
610               ResponseText = RES_DEFAULT_NOTFOUND;
611               break;
612           }
613           break;
614         case "/system/getinfo":
615           if (Parameters.Length == 1)
616           {
617             String WantedType = UriGetParameter.FindParameter(Parameters,"type");
618             if (WantedType != null)
619             {
620               switch (WantedType)
621               {
622                 case "username":
623                   // TERRIBLE MISTAKE
624                   // JUST DONT DO THAT :-)
625 /*                  if (this.ServiceData.LastTime.Ticks != 0)
626                     ResponseText = this.MakeRespOkWithData( (this.ServiceData.Username != null ? this.ServiceData.Username : "*VOID*" ) );
627                   else
628                     ResponseText = this.MakeRespOkWithData("logged out: " + (this.ServiceData.Username != null ? this.ServiceData.Username : "*VOID*" ));
629                     */
630                   ResponseText = this.MakeRespOkWithData( (this.ServiceData.Username != null ? this.ServiceData.Username : "*VOID*" ) );
631                   break;
632                 case "hostname":
633                   ResponseText = this.MakeRespOkWithData( Environment.MachineName );
634                   break;
635                 case "osversion":
636                   ResponseText = this.MakeRespOkWithData( Environment.OSVersion.ToString() );
637                   break;
638                 case "osboottime":
639                   ResponseText = this.MakeRespOkWithData( Environment.TickCount.ToString() );
640                   break;
641                 case "version":
642                   ResponseText = this.MakeRespOkWithData( Qbe.QbeClientVersion.ClientVersion );
643                   break;
644                 case "cvsid":
645                   ResponseText = this.MakeRespOkWithData( Qbe.QbeClientVersion.CVSID );
646                   break;
647                 case "internetstate":
648                   ResponseText = this.MakeRespOkWithData( this.ServiceData.User_Internet.ToString() );
649                   break;
650                 case "connectionstate":
651                   ResponseText = this.MakeRespOkWithData( this.ServiceData.ConnectionState.ToString() );
652                   break;
653                 case "connectionerror":
654                   ResponseText = this.MakeRespOkWithData( this.ServiceData.ConnectionError.ToString() );
655                   break;
656                 case "copyright":
657                   ResponseText = this.MakeRespOkWithData( "(C) Copyright 2002-2004 Christian Hofstaedtler" );
658                   break;
659                 case "authserver":
660                   ResponseText = this.MakeRespOkWithData( this.ServiceData.AuthServer );
661                   break;
662                 case "time":
663                   ResponseText = this.MakeRespOkWithData( DateTime.Now.Ticks.ToString() );
664                   break;
665                 default:
666                   ResponseText = RES_DEFAULT_NOTFOUND;
667                   break;
668               }
669             }
670             else 
671               ResponseText = RES_DEFAULT_NOTFOUND;
672           } 
673           else 
674             ResponseText = RES_DEFAULT_NOTFOUND;
675           break;
676         case "/system/message":
677           if (Parameters.Length == 1)
678           {
679             this.execNotification(Parameters[0].UnsplittedValue);
680             ResponseText = this.MakeRespOk();
681           } 
682           else 
683           {
684             ResponseText = this.MakeRespErrGeneric("No message specified.");
685           }
686           break;
687         case "/system/stopservice":
688           ResponseText = this.MakeRespOk();
689           resp.ShutdownService = true;
690           break;
691         case "/system/setauthserver":
692           if ( (Parameters.Length == 1) && ( Parameters[0].UnsplittedValue != null ) ) 
693             this.ServiceData.AuthServer = Parameters[0].UnsplittedValue;
694           break;
695         case "/system/setmanager":
696           if ( (Parameters.Length == 1) && ( Parameters[0].UnsplittedValue != null ) ) 
697             this.ServiceData.ManagerAddress = System.Net.IPAddress.Parse(Parameters[0].UnsplittedValue);
698           break;
699         case "/system/exec":
700           if ( (Parameters.Length == 1) && ( Parameters[0].UnsplittedValue != null ) ) 
701             System.Diagnostics.Process.Start(Parameters[0].UnsplittedValue);
702           break;
703         case "/system/shutdown":
704           ResponseText = this.MakeRespOk();
705           System.Diagnostics.Process.Start("rundll32.exe","user.exe,exitwindows");
706           break;
707         case "/system/restart":
708           ResponseText = this.MakeRespOk();
709           System.Diagnostics.Process.Start("rundll32.exe","user.exe,restartwindows");
710           break;
711         default:
712           ResponseText = RES_DEFAULT_NOTFOUND;
713           break;
714       }
715 
716       resp.ResponseText = ResponseText;
717       return resp;
718     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea3}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!Run@{Run}}
\index{Run@{Run}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[Run]{\setlength{\rightskip}{0pt plus 5cm}bool Run ()}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea3}




Definiert in Zeile 180 der Datei Http\-Service.cs.

Benutzt Http\-Service::Run2() und Http\-Service::tcp\-Listener.



\footnotesize\begin{verbatim}181     {
182       if (tcpListener == null) { Console.WriteLine("tcpListener not initialized"); return false; }
183 
184       try
185       {
186         tcpListener.Start();
187       }
188       catch (Exception ex)
189       {
190         ex=ex;
191         Console.WriteLine("TCPListener Error: " + ex.Message + "\n" + ex.StackTrace);
192         return false;
193       }
194       return Run2();
195     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced1}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!Run2@{Run2}}
\index{Run2@{Run2}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[Run2]{\setlength{\rightskip}{0pt plus 5cm}bool Run2 ()\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced1}




Definiert in Zeile 197 der Datei Http\-Service.cs.

Benutzt Http\-Service::tcp\-Client, Http\-Service::Tcp\-Client\-Handler\-Func(), Http\-Service::tcp\-Client\-Running und Http\-Service::tcp\-Listener.

Wird benutzt von Http\-Service::Run().



\footnotesize\begin{verbatim}198     {
199       while(true)
200       {
201         System.Threading.Thread t = new System.Threading.Thread(new System.Threading.ThreadStart(TcpClientHandlerFunc));
202         tcpClient = tcpListener.AcceptSocket();
203 
204         tcpClientRunning = false;
205         t.Start();
206         while (!tcpClientRunning) { System.Threading.Thread.Sleep(10); }
207       }
208     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea1}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RunAsOwnThread@{RunAsOwnThread}}
\index{RunAsOwnThread@{RunAsOwnThread}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RunAsOwnThread]{\setlength{\rightskip}{0pt plus 5cm}bool Run\-As\-Own\-Thread ()}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea1}


Startet die Ausfuehrung des HTTP Service in einem eigenen Thread. 



Definiert in Zeile 144 der Datei Http\-Service.cs.

Benutzt Http\-Service::Own\-Thread, Http\-Service::Run\-As\-Own\-Thread\-Thread\-Func() und Http\-Service::tcp\-Listener.

Wird benutzt von Service\-Start().



\footnotesize\begin{verbatim}145     {
146       if (tcpListener == null)
147         return false;
148 
149       try 
150       {
151         tcpListener.Start();
152       }
153       catch (Exception ex) 
154       {
155         ex=ex;
156         return false;
157       }
158 
159       OwnThread = new System.Threading.Thread(new System.Threading.ThreadStart(RunAsOwnThreadThreadFunc));
160       OwnThread.Start();
161       return true;
162     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced0}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RunAsOwnThreadThreadFunc@{RunAsOwnThreadThreadFunc}}
\index{RunAsOwnThreadThreadFunc@{RunAsOwnThreadThreadFunc}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RunAsOwnThreadThreadFunc]{\setlength{\rightskip}{0pt plus 5cm}void Run\-As\-Own\-Thread\-Thread\-Func ()\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced0}




Definiert in Zeile 163 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Run\-As\-Own\-Thread().



\footnotesize\begin{verbatim}164     {
165       this.Run2();
166     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea5}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!runLogin@{runLogin}}
\index{runLogin@{runLogin}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[runLogin]{\setlength{\rightskip}{0pt plus 5cm}void run\-Login ()}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea5}


Ruft den RPC client/login am Authentication Server auf. 



Definiert in Zeile 790 der Datei Http\-Service.cs.

Benutzt Http\-Service::Foreign\-Http\-Response::Status\-Code.



\footnotesize\begin{verbatim}791     {
792       ForeignHttpResponse Response;
793       Response = this.runUrl("/rpc/client/login?ver="+Qbe.QbeClientVersion.ClientVersion);
794 //      Console.WriteLine(Response.StatusCode.ToString() + " " + Response.StatusDescription + ": " + Response.Body);
795 
796       this.ServiceData.LastTime = DateTime.Now;
797       this.ServiceData.ConnectionError = Response.StatusCode;
798       if (Response.StatusCode == 200) 
799       {
800         // connection ok
801         this.ServiceData.ConnectionState = 0; 
802       } 
803       else { 
804         // no connection
805         this.ServiceData.ConnectionState = -1; 
806         if (Response.StatusCode > 400)
807           this.ServiceData.ConnectionState = 1; // server declined request
808       }
809     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea4}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!runLogout@{runLogout}}
\index{runLogout@{runLogout}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[runLogout]{\setlength{\rightskip}{0pt plus 5cm}void run\-Logout ()}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicea4}


Ruft den RPC client/logout am Authentication Server auf. 



Definiert in Zeile 773 der Datei Http\-Service.cs.

Benutzt Http\-Service::Foreign\-Http\-Response::Status\-Code.



\footnotesize\begin{verbatim}774     {
775       ForeignHttpResponse Response;
776       Response = this.runUrl("/rpc/client/logout");
777 //      Console.WriteLine(Response.StatusCode.ToString() + " " + Response.StatusDescription + ": " + Response.Body);
778 
779       this.ServiceData.LastTime = DateTime.Now;
780       this.ServiceData.ConnectionError = Response.StatusCode;
781       this.ServiceData.ConnectionState = -1;  // no connection
782       this.ServiceData.Username = "";
783       if (Response.StatusCode == 200) 
784       {
785              this.ServiceData.ConnectionError = -1; // wah ZAP EVERYTHING
786       }
787     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced9}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!runUrl@{runUrl}}
\index{runUrl@{runUrl}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[runUrl]{\setlength{\rightskip}{0pt plus 5cm}\hyperlink{classQbeSAS_1_1HttpService_1_1ForeignHttpResponse}{Foreign\-Http\-Response} run\-Url (string {\em url\-Str})\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced9}


Fuehrt einen RPC Aufruf am \hyperlink{namespaceQbe}{Qbe} Authentication Server aus. 



Definiert in Zeile 721 der Datei Http\-Service.cs.

Benutzt Http\-Service::Foreign\-Http\-Response::Body, Http\-Service::Service\-Data\-Type::b\-Use\-SSL, Http\-Service::Service\-Data\-Type::Password, Http\-Service::RES\_\-USERAGENT, Http\-Service::Service\-Data, Http\-Service::Foreign\-Http\-Response::Status\-Code, Http\-Service::Foreign\-Http\-Response::Status\-Description und Http\-Service::Service\-Data\-Type::Username.



\footnotesize\begin{verbatim}722     {
723       Console.WriteLine("rpc call: " + urlStr);
724       
725       ForeignHttpResponse ret = new ForeignHttpResponse();
726       System.Uri url = null;
727       System.Net.HttpWebRequest req = null;
728       System.Net.HttpWebResponse resp = null;
729       System.IO.Stream respStream = null;
730       System.IO.StreamReader rdr = null;
731 
732       try 
733       {
734         url = new System.Uri((this.ServiceData.bUseSSL == true ? "https://" : "http://") + this.ServiceData.AuthServer + urlStr);
735         req = (System.Net.HttpWebRequest)System.Net.HttpWebRequest.Create(url);
736         req.Proxy = new System.Net.WebProxy();
737         System.Net.ServicePointManager.CertificatePolicy = new QbeSAS.AllCertsAreOK();
738         
739         req.UserAgent = RES_USERAGENT;
740         req.Headers.Add("iLogin-User",this.ServiceData.Username);
741         req.Headers.Add("iLogin-Pass",this.ServiceData.Password);
742 
743         resp = (System.Net.HttpWebResponse)req.GetResponse();
744         respStream = resp.GetResponseStream();
745         rdr = new System.IO.StreamReader(respStream);
746         ret.StatusCode = (Int16)resp.StatusCode;
747         ret.StatusDescription = resp.StatusDescription;
748         ret.Body = rdr.ReadToEnd();
749       } 
750       catch (System.Net.WebException webEx)
751       {
752         System.Net.HttpWebResponse r = (System.Net.HttpWebResponse)webEx.Response;
753         ret.StatusCode = (Int16)r.StatusCode;
754         ret.StatusDescription = r.StatusDescription;
755         ret.Body = (new System.IO.StreamReader(r.GetResponseStream())).ReadToEnd();
756       }
757       catch (Exception ex)
758       {
759         throw new Exception("Connection Error",ex);
760       } 
761       finally 
762       {
763         if (req != null) req.Abort();
764         if (resp != null) resp.Close();
765         if (respStream != null) respStream.Close();
766         if (rdr != null) rdr.Close();
767       }
768       
769       return ret;
770     }
\end{verbatim}\normalsize 
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced2}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!TcpClientHandlerFunc@{TcpClientHandlerFunc}}
\index{TcpClientHandlerFunc@{TcpClientHandlerFunc}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[TcpClientHandlerFunc]{\setlength{\rightskip}{0pt plus 5cm}void Tcp\-Client\-Handler\-Func ()\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServiced2}




Definiert in Zeile 210 der Datei Http\-Service.cs.

Benutzt Http\-Service::Uri\-Get\-Parameter::Is\-Splitted, Http\-Service::Uri\-Get\-Parameter::Name, Http\-Service::RES\_\-HEADERS, Http\-Service::RES\_\-HTTP\_\-BADREQUEST, Http\-Service::RES\_\-NEWLINE, Http\-Service::Service\-Http\-Response::Response\-Text, Http\-Service::tcp\-Client, Http\-Service::tcp\-Client\-Running, Http\-Service::Uri\-Get\-Parameter::Unsplitted\-Value und Http\-Service::Uri\-Get\-Parameter::Value.

Wird benutzt von Http\-Service::Run2().



\footnotesize\begin{verbatim}211     {
212       System.Net.Sockets.Socket myClient = tcpClient;
213       tcpClientRunning = true;    // clear lock
214 
215       System.Net.Sockets.NetworkStream stream = new System.Net.Sockets.NetworkStream(myClient,true);
216       System.IO.StreamReader strr = new System.IO.StreamReader(stream);
217       System.IO.StreamWriter strw = new System.IO.StreamWriter(stream);
218 
219       byte[] ipAddr = ((System.Net.IPEndPoint)tcpClient.RemoteEndPoint).Address.GetAddressBytes();
220       byte[] managerIp = null; 
221       if (this.ServiceData.ManagerAddress != null) { this.ServiceData.ManagerAddress.GetAddressBytes(); }
222       bool ConnectionOkay = false;
223 
224       if ( (ipAddr[0] == 127) && (ipAddr[1] == 0) &&(ipAddr[2] == 0) && (ipAddr[3] == 1))
225         ConnectionOkay = true;
226 
227       if ( (ipAddr[0] == 10) && (ipAddr[1] == 0) &&(ipAddr[2] == 2))
228         ConnectionOkay = true;
229 
230       if (managerIp != null)
231       if ( (ipAddr[0] == managerIp[0]) && (ipAddr[1] == managerIp[1]) && (ipAddr[2] == managerIp[2]) && (ipAddr[3] == managerIp[3]))
232         ConnectionOkay = true;
233 
234       String thisLine = strr.ReadLine();
235 
236       if (!ConnectionOkay)
237       {
238         strw.WriteLine("HTTP/1.0 403 Forbidden" + RES_NEWLINE + RES_NEWLINE );
239         strw.Flush();
240         stream.Flush();
241         stream.Close();
242         myClient.Close();
243         return;
244       }
245 
246       if (thisLine.StartsWith("GET "))
247       {
248         int iHttp = thisLine.LastIndexOf(" HTTP/");
249         if (iHttp < 5)
250           strw.WriteLine(RES_HTTP_BADREQUEST + RES_HEADERS + RES_NEWLINE + "<b>The Server could not understand your request.</b>" + RES_NEWLINE);
251         else
252         {
253           String requestString = thisLine.Substring(4,iHttp-4);
254           Uri uri = new Uri("http://localhost"+requestString);
255 
256           String requestFilename = System.Web.HttpUtility.UrlDecode(uri.AbsolutePath);
257           String requestQuery = uri.Query;
258           if (requestQuery.StartsWith("?")) { requestQuery = requestQuery.Substring(1); }
259 
260           String[] requestParams;
261           if (requestQuery != "") 
262           { 
263             requestParams = requestQuery.Split("&".ToCharArray());
264           } 
265           else 
266           {
267             requestParams = new String[0];
268           }
269 
270           System.Collections.ArrayList requestParameters = new System.Collections.ArrayList();
271 
272           foreach(String bla in requestParams)
273           {
274             UriGetParameter thisParm = new UriGetParameter();
275             thisParm.UnsplittedValue = System.Web.HttpUtility.UrlDecode(bla);
276             String[] splitted = bla.Split("=".ToCharArray());
277             if (splitted.Length == 2)
278             {
279               thisParm.IsSplitted = true;
280               thisParm.Name = System.Web.HttpUtility.UrlDecode(splitted[0]);
281               thisParm.Value = System.Web.HttpUtility.UrlDecode(splitted[1]);
282             } 
283             else 
284             {
285               thisParm.IsSplitted = false;
286             }
287             requestParameters.Add(thisParm);
288           }
289           
290           UriGetParameter[] Parameters = new UriGetParameter[requestParameters.Count];
291           int el = 0;
292           foreach(UriGetParameter thisParm in requestParameters)
293           {
294             Parameters[el] = thisParm;
295             el++;
296           }
297 
298           ServiceHttpResponse response = this.ParseRequest(requestFilename,Parameters);
299           strw.Write(response.ResponseText);
300         }
301         strw.Flush();
302       } 
303       else  
304       {
305         strw.WriteLine(RES_HTTP_BADREQUEST + RES_HEADERS + "<b>The Server could not understand your request.</b>" + RES_NEWLINE);
306         strw.Flush();
307       }
308       stream.Flush();
309       stream.Close();
310       myClient.Close();
311     }
\end{verbatim}\normalsize 


\subsection{Dokumentation der Datenelemente}
\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer18}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!OwnThread@{OwnThread}}
\index{OwnThread@{OwnThread}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[OwnThread]{\setlength{\rightskip}{0pt plus 5cm}System.Threading.Thread \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer18}{Own\-Thread} = null\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer18}




Definiert in Zeile 97 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Kill\-Own\-Thread() und Http\-Service::Run\-As\-Own\-Thread().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer11}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_DEFAULT_NOTFOUND@{RES\_\-DEFAULT\_\-NOTFOUND}}
\index{RES_DEFAULT_NOTFOUND@{RES\_\-DEFAULT\_\-NOTFOUND}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-DEFAULT\_\-NOTFOUND]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer11}{RES\_\-DEFAULT\_\-NOTFOUND} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer8}{RES\_\-HTTP\_\-NOTFOUND} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer1}{RES\_\-HEADER\_\-SERVER} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer2}{RES\_\-HEADERS} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer0}{RES\_\-NEWLINE} + \char`\"{}Location not found.\char`\"{} + RES\_\-NEWLINE\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer11}




Definiert in Zeile 30 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Parse\-Request().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer10}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_DEFAULT_OK@{RES\_\-DEFAULT\_\-OK}}
\index{RES_DEFAULT_OK@{RES\_\-DEFAULT\_\-OK}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-DEFAULT\_\-OK]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer10}{RES\_\-DEFAULT\_\-OK} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer6}{RES\_\-HTTP\_\-OK} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer1}{RES\_\-HEADER\_\-SERVER} + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer2}{RES\_\-HEADERS}\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer10}




Definiert in Zeile 29 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Make\-Resp\-Login\-Form() und Http\-Service::Parse\-Request().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer3}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HEADER_REFRESH0@{RES\_\-HEADER\_\-REFRESH0}}
\index{RES_HEADER_REFRESH0@{RES\_\-HEADER\_\-REFRESH0}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HEADER\_\-REFRESH0]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer3}{RES\_\-HEADER\_\-REFRESH0} = \char`\"{}Refresh: 0; url=\{0\}\char`\"{} + RES\_\-NEWLINE\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer3}




Definiert in Zeile 21 der Datei Http\-Service.cs.\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer4}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HEADER_REFRESH5@{RES\_\-HEADER\_\-REFRESH5}}
\index{RES_HEADER_REFRESH5@{RES\_\-HEADER\_\-REFRESH5}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HEADER\_\-REFRESH5]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer4}{RES\_\-HEADER\_\-REFRESH5} = \char`\"{}Refresh: 5; url=\{0\}\char`\"{} + RES\_\-NEWLINE\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer4}




Definiert in Zeile 22 der Datei Http\-Service.cs.\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer1}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HEADER_SERVER@{RES\_\-HEADER\_\-SERVER}}
\index{RES_HEADER_SERVER@{RES\_\-HEADER\_\-SERVER}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HEADER\_\-SERVER]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer1}{RES\_\-HEADER\_\-SERVER} = \char`\"{}Server: Qbe\-Service/\char`\"{} + Qbe.Qbe\-Client\-Version.Client\-Version + \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer0}{RES\_\-NEWLINE}\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer1}




Definiert in Zeile 17 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Make\-Resp\-Err\-Generic(), Http\-Service::Make\-Resp\-Err\-Not\-Implemented(), Http\-Service::Make\-Resp\-Ok() und Http\-Service::Make\-Resp\-Ok\-With\-Data().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer2}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HEADERS@{RES\_\-HEADERS}}
\index{RES_HEADERS@{RES\_\-HEADERS}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HEADERS]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer2}{RES\_\-HEADERS}\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer2}


{\bf Initialisierung:}

\footnotesize\begin{verbatim} "Connection: close" + RES_NEWLINE + "Pragma: no-cache" + RES_NEWLINE + 
                        "Content-Type: text/html; charset=iso-8859-1" + RES_NEWLINE + 
                        "Expires: 0" + RES_NEWLINE + RES_NEWLINE
\end{verbatim}\normalsize 


Definiert in Zeile 18 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Make\-Resp\-Err\-Generic(), Http\-Service::Make\-Resp\-Err\-Not\-Implemented(), Http\-Service::Make\-Resp\-Ok(), Http\-Service::Make\-Resp\-Ok\-With\-Data() und Http\-Service::Tcp\-Client\-Handler\-Func().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer13}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HTML_FOOTER@{RES\_\-HTML\_\-FOOTER}}
\index{RES_HTML_FOOTER@{RES\_\-HTML\_\-FOOTER}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HTML\_\-FOOTER]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer13}{RES\_\-HTML\_\-FOOTER}\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer13}


{\bf Initialisierung:}

\footnotesize\begin{verbatim} "<br><table border=0><tr><td><span style=\"color: #336699; font-size: 25pt; font-weight: bold;\">Q</span></td><td><span>" + RES_NEWLINE + 
                        "Qbe SAS Client " + Qbe.QbeClientVersion.ClientVersion + " &copy; 2001-2004 Christian Hofst&auml;dtler<br>" + 
                        Qbe.QbeClientVersion.CVSID + "</span></td></tr></table>" + 
                        "</body></html>" + RES_NEWLINE + RES_NEWLINE
\end{verbatim}\normalsize 


Definiert in Zeile 44 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Make\-Resp\-Login\-Form() und Http\-Service::Parse\-Request().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer12}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HTML_HEADER@{RES\_\-HTML\_\-HEADER}}
\index{RES_HTML_HEADER@{RES\_\-HTML\_\-HEADER}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HTML\_\-HEADER]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer12}{RES\_\-HTML\_\-HEADER}\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer12}


{\bf Initialisierung:}

\footnotesize\begin{verbatim} "<html>" + 
                        "<title>Qbe SAS Client</title>" + 
                        "<body bgcolor=white text=black>" + RES_NEWLINE +
                        "<style>body,p,input,form { font-family: \"Trebuchet MS\",Geneva,Helvetica,Arial; font-size: 8pt; background-color: white; }" + RES_NEWLINE +
                        "tr,td { font-family: \"Trebuchet MS\",Geneva,Helvetica,Arial; font-size: 8pt; }" + RES_NEWLINE +
                        "a { color: navy; }</style>" + RES_NEWLINE +
                        "<a href=\"/web/menu\">Status</a> &nbsp; <a href=\"/web/login\">Anmelden</a> &nbsp; <a href=\"/web/logout\">Abmelden</a>" + 

                        " &nbsp; <a href=\"/web/cleardata\">Daten l&ouml;schen</a><br><br>"



                        + RES_NEWLINE
\end{verbatim}\normalsize 


Definiert in Zeile 31 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Make\-Resp\-Login\-Form() und Http\-Service::Parse\-Request().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HTTP@{RES\_\-HTTP}}
\index{RES_HTTP@{RES\_\-HTTP}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HTTP]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} = \char`\"{}HTTP/1.0\char`\"{}\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}




Definiert in Zeile 23 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Parse\-Request().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer7}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HTTP_BADREQUEST@{RES\_\-HTTP\_\-BADREQUEST}}
\index{RES_HTTP_BADREQUEST@{RES\_\-HTTP\_\-BADREQUEST}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HTTP\_\-BADREQUEST]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer7}{RES\_\-HTTP\_\-BADREQUEST} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} + \char`\"{} 400 Bad Request\char`\"{} + RES\_\-NEWLINE\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer7}




Definiert in Zeile 25 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Tcp\-Client\-Handler\-Func().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer9}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HTTP_ERROR@{RES\_\-HTTP\_\-ERROR}}
\index{RES_HTTP_ERROR@{RES\_\-HTTP\_\-ERROR}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HTTP\_\-ERROR]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer9}{RES\_\-HTTP\_\-ERROR} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} + \char`\"{} 500 Internal Server Error\char`\"{} + RES\_\-NEWLINE\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer9}




Definiert in Zeile 27 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Make\-Resp\-Err\-Generic() und Http\-Service::Make\-Resp\-Err\-Not\-Implemented().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer8}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HTTP_NOTFOUND@{RES\_\-HTTP\_\-NOTFOUND}}
\index{RES_HTTP_NOTFOUND@{RES\_\-HTTP\_\-NOTFOUND}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HTTP\_\-NOTFOUND]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer8}{RES\_\-HTTP\_\-NOTFOUND} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} + \char`\"{} 404 Not Found\char`\"{} + RES\_\-NEWLINE\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer8}




Definiert in Zeile 26 der Datei Http\-Service.cs.\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer6}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_HTTP_OK@{RES\_\-HTTP\_\-OK}}
\index{RES_HTTP_OK@{RES\_\-HTTP\_\-OK}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-HTTP\_\-OK]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer6}{RES\_\-HTTP\_\-OK} = \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer5}{RES\_\-HTTP} + \char`\"{} 200 Ok\char`\"{} + RES\_\-NEWLINE\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer6}




Definiert in Zeile 24 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Make\-Resp\-Ok() und Http\-Service::Make\-Resp\-Ok\-With\-Data().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer0}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_NEWLINE@{RES\_\-NEWLINE}}
\index{RES_NEWLINE@{RES\_\-NEWLINE}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-NEWLINE]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer0}{RES\_\-NEWLINE} = \char`\"{}$\backslash$r$\backslash$n\char`\"{}\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer0}




Definiert in Zeile 16 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Make\-Resp\-Err\-Generic(), Http\-Service::Make\-Resp\-Err\-Not\-Implemented(), Http\-Service::Make\-Resp\-Login\-Form(), Http\-Service::Make\-Resp\-Ok(), Http\-Service::Make\-Resp\-Ok\-With\-Data(), Http\-Service::Parse\-Request() und Http\-Service::Tcp\-Client\-Handler\-Func().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer14}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!RES_USERAGENT@{RES\_\-USERAGENT}}
\index{RES_USERAGENT@{RES\_\-USERAGENT}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[RES\_\-USERAGENT]{\setlength{\rightskip}{0pt plus 5cm}const String \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer14}{RES\_\-USERAGENT} = \char`\"{}Qbe\-Service/\char`\"{} + Qbe.Qbe\-Client\-Version.Client\-Version\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer14}




Definiert in Zeile 49 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::run\-Url().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer15}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!ServiceData@{ServiceData}}
\index{ServiceData@{ServiceData}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[ServiceData]{\setlength{\rightskip}{0pt plus 5cm}\hyperlink{classQbeSAS_1_1HttpService_1_1ServiceDataType}{Service\-Data\-Type} \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer15}{Service\-Data} = new \hyperlink{classQbeSAS_1_1HttpService_1_1ServiceDataType}{Service\-Data\-Type}()\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer15}




Definiert in Zeile 94 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Parse\-Request() und Http\-Service::run\-Url().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer17}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!tcpClient@{tcpClient}}
\index{tcpClient@{tcpClient}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[tcpClient]{\setlength{\rightskip}{0pt plus 5cm}System.Net.Sockets.Socket \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer17}{tcp\-Client} = null\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer17}




Definiert in Zeile 96 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Run2() und Http\-Service::Tcp\-Client\-Handler\-Func().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer19}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!tcpClientRunning@{tcpClientRunning}}
\index{tcpClientRunning@{tcpClientRunning}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[tcpClientRunning]{\setlength{\rightskip}{0pt plus 5cm}bool \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer19}{tcp\-Client\-Running} = false\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer19}




Definiert in Zeile 98 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Run2() und Http\-Service::Tcp\-Client\-Handler\-Func().\hypertarget{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer16}{
\index{QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}!tcpListener@{tcpListener}}
\index{tcpListener@{tcpListener}!QbeSAS::HttpService@{Qbe\-SAS::Http\-Service}}
\subsubsection[tcpListener]{\setlength{\rightskip}{0pt plus 5cm}System.Net.Sockets.Tcp\-Listener \hyperlink{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer16}{tcp\-Listener} = null\hspace{0.3cm}{\tt  \mbox{[}private\mbox{]}}}}
\label{classQbeSAS_1_1HttpService_QbeSAS_1_1HttpServicer16}




Definiert in Zeile 95 der Datei Http\-Service.cs.

Wird benutzt von Http\-Service::Http\-Service(), Http\-Service::Run(), Http\-Service::Run2() und Http\-Service::Run\-As\-Own\-Thread().